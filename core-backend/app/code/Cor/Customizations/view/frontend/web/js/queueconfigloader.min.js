var __extends,QueueIt,en;(function(n){var t;(function(n){n.Version="1.7.49"})(t=n.Javascript||(n.Javascript={}))})(QueueIt||(QueueIt={})),function(n){var t;(function(n){var t=function(){function n(){}return n.retrieveEnvInfoFromScriptTag=function(){var r,i,t,u;if(n.environemntVariable)return n.environemntVariable;try{for(r=document.getElementsByTagName("script"),i=0;i<r.length;i++)if(t=r[i],u=t.getAttribute("data-queueit-c"),u){var f=t.getAttribute("data-queueit-host")||"",e=t.getAttribute("data-queueit-intercept")||"",o=e.toLowerCase()=="true",s=t.getAttribute("data-queueit-intercept-domain")||"",h=t.getAttribute("data-queueit-jshost")||"",c=t.getAttribute("data-queueit-nocachereq")||"",l=c.toLowerCase()=="true",a=t.getAttribute("data-queueit-noautorun")||"",v=a.toLowerCase()=="true";return n.environemntVariable={cid:u,intercept:o,host:f,jsHost:h,noCacheRequest:l,noAutorun:v,domainToIntercept:s},n.environemntVariable}}catch(y){console.log(y)}return null},n.cleanUp=function(){n.environemntVariable=undefined},n}();n.EnvironmentHelper=t})(t=n.Tools||(n.Tools={}))}(QueueIt||(QueueIt={})),function(n){var t;(function(n){var t;(function(n){var t=function(){function n(){}return n.interceptOpen=function(t,i,r){if(i===void 0&&(i=null),r===void 0&&(r=null),r||(r=function(n){window.location.href=n;document.close()}),i||(i=function(){return window.location.href}),typeof XMLHttpRequest=="function"&&XMLHttpRequest.prototype){var u=XMLHttpRequest.prototype.open,f=function(n){if(n.readyState===XMLHttpRequest.DONE)try{var t=n.getResponseHeader("x-queueit-redirect");t&&r(decodeURIComponent(t))}catch(i){console.log("getResponseHeader('x-queueit-redirect') error"+i)}};XMLHttpRequest.prototype.open=function(r,e,o,s,h){var a=[r,e,o,s,h],c=this,l=!1;try{l=n.isUrlDomainMatchingOrIsRelativeURL(e,t);l&&c.addEventListener("readystatechange",function(){return f(c)})}catch(v){}finally{u.apply(c,a);l&&c.setRequestHeader("x-queueit-ajaxpageurl",encodeURIComponent(i()))}}}},n.isUrlDomainMatchingOrIsRelativeURL=function(n,t){var i=new RegExp("^(?:[a-z]+:)?//","i");return i.test(n)?t&&n.indexOf(t)>-1?!0:void 0:!0},n}();n.AjaxInterceptor=t})(t=n.KnownUser||(n.KnownUser={}))})(t=n.Javascript||(n.Javascript={}))}(QueueIt||(QueueIt={})),function(n){var t;(function(t){var i;(function(t){var r=function(){function t(){}return t.tryInitQueueClientFromToken=function(i,r){var u,f;(r===void 0&&(r=null),r||(r=window.location.href),i&&i.cid)&&(u=t.getQueueITToken(r),u&&u.eventId&&n.Javascript.QueueClient&&!window.myQueueClient)&&(f={removeTokenFromUrl:!0},i.host&&(f.host=i.host),window.myQueueClient=window.queueClient(i.cid,u.eventId,f))},t.getQueueITToken=function(n){var u=/queueittoken=([^&]*)/i.exec(n),t,o,r,f,s,e;if(!u||!u[1])return null;for(t=new i,t.rawQueueItToken=u[1],o=t.rawQueueItToken.split("~"),r=0,f=o;r<f.length;r++){s=f[r];e=s.split("_");switch(e[0].toLowerCase()){case"e":t.eventId=e[1]}}return t},t}(),i;t.UrlQueueClientInitializer=r;i=function(){function n(){}return n}();t.QueueItToken=i})(i=t.KnownUser||(t.KnownUser={}))})(t=n.Javascript||(n.Javascript={}))}(QueueIt||(QueueIt={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var e=function(){function n(){}return n}(),t,i,r,u,f;n.QueueClientEventConfig=e;t=function(){function n(){}return n.AllowTParameter="AllowTParameter",n.EventTargetUrl="EventTargetUrl",n.ForcedTargetUrl="ForcedTargetUrl",n.ForecedTargetUrl="ForecedTargetUrl",n}();n.RedirectionLogic=t;i=function(){function n(){}return n.UrlValidator="UrlValidator",n.CookieValidator="CookieValidator",n.JSVariableValidator="JSVariableValidator",n.UserAgentValidator="UserAgentValidator",n}();n.ValidatorType=i;r=function(){function n(){}return n.Equals="Equals",n.Contains="Contains",n.ContainsAny="ContainsAny",n.EqualsAny="EqualsAny",n.NotEquals="NotEquals",n.NotContains="NotContains",n.IgEquals="IgEquals",n.IgContains="IgContains",n}();n.ComparisonOperatorType=r;u=function(){function n(){}return n.PagePath="PagePath",n.HostName="HostName",n.PageUrl="PageUrl",n}();n.UrlPartSelectorType=u;f=function(){function n(){}return n.CancelAction="Cancel",n.QueueAction="Queue",n.IgnoreAction="Ignore",n}();n.ActionType=f})(t=n.Model||(n.Model={}))})(t=n.IntegrationConfig||(n.IntegrationConfig={}))})(t=n.Javascript||(n.Javascript={}))}(QueueIt||(QueueIt={}));__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){var i;(function(t){function f(i,r,f){var o,c,y,e,l,s,h,p,a,v;if(r===void 0&&(r=u.CreateIntegrationPoint),f===void 0&&(f=null),i){for(o=0,c=i.integrations;o<c.length;o++)if(y=c[o],e=r(y),e.evaluate()){e.getActionType()===t.Model.ActionType.QueueAction?(l=e.getQueueClientConfig(i.customerId),window.myQueueClient=window.queueClient(i.customerId,l.eventId,l)):e.getActionType()===t.Model.ActionType.CancelAction?(s=e,f||(f=function(){return window.location.protocol}),h=s.getQueueDomain(),h||(h=i.customerId+".queue-it.net"),p=new n.Javascript.CookieManager(i.customerId,s.getEventId(),f()+"//"+h,s.getCookieDomain()),p.cancelQueueId()):e.getActionType()===t.Model.ActionType.IgnoreAction&&(a=n.Tools.EnvironmentHelper.retrieveEnvInfoFromScriptTag(),a.intercept&&n.Javascript.KnownUser.UrlQueueClientInitializer.tryInitQueueClientFromToken(a));return}v=n.Tools.EnvironmentHelper.retrieveEnvInfoFromScriptTag();v.intercept&&n.Javascript.KnownUser.UrlQueueClientInitializer.tryInitQueueClientFromToken(v)}}function w(t){t===void 0&&(t=new Date);var i=n.Tools.EnvironmentHelper.retrieveEnvInfoFromScriptTag();i.noAutorun||p(t,i)}function p(t,i){var r,u;if(t===void 0&&(t=new Date),i===void 0&&(i=null),i||(i=n.Tools.EnvironmentHelper.retrieveEnvInfoFromScriptTag()),!i)throw"No queueit attribute is found in script tag";if(r="",i.noCacheRequest)r=t.getTime().toString();else{var h=t.getFullYear(),f=t.getMonth()+1,e=t.getDate(),o=t.getHours(),s=Math.floor(t.getMinutes()/5);r=h+""+(f<10?"0"+f:f)+""+(e<10?"0"+e:e)+""+(o<10?"0":o)+o+(s<10?"0"+s:s)}u=document.createElement("script");u.type="text/javascript";u.src=b(i)+"?versionTimestamp="+r;document.getElementsByTagName("head")[0].appendChild(u)}function b(n){if(!n||!n.cid)throw"customer id is not found";var t="https://assets.queue-it.net/";return n.jsHost&&(t=n.jsHost),t+n.cid+"/integrationconfig/javascript/queueclientConfig.js"}function k(n){f(n)}function d(n){n===void 0&&(n=!1);n?p():window.queueit_clientside_config&&f(window.queueit_clientside_config)}function g(){return window.queueit_clientside_config?!0:!1}function nt(){return window.queueit_clientside_config}var u=function(){function n(n,t){this.model=n;this._triggerFactory=t;this.initTriggers()}return n.CreateIntegrationPoint=function(i,r){return r===void 0&&(r=h.CreateTrigger),n.getActionType(i)===t.Model.ActionType.QueueAction?new e(i,r):n.getActionType(i)===t.Model.ActionType.CancelAction?new o(i,r):new s(i,r)},n.prototype.initTriggers=function(){var n,t,i;for(this._triggers=[],n=0,t=this.model.triggers;n<t.length;n++)i=t[n],this._triggers.push(this._triggerFactory(i))},n.prototype.evaluate=function(){for(var i,n=0,t=this._triggers;n<t.length;n++)if(i=t[n],i.evaluate())return!0;return!1},n.prototype.getActionType=function(){return n.getActionType(this.model)},n.getActionType=function(n){return n.actionType?n.actionType:t.Model.ActionType.QueueAction},n}(),e,o,s,h,i,c,l,a,v,y,r;t.IntegrationPointBase=u;e=function(n){function i(t,i){return n.call(this,t,i)||this}return __extends(i,n),i.prototype.getQueueClientConfig=function(n){var i=new t.Model.QueueClientEventConfig,r;return i.eventId=this.model.eventId,i.cookieDomain=this.model.cookieDomain,i.culture=this.model.culture,i.extendValidity=this.model.extendValidity,i.layoutName=this.model.layoutName,i.validity=this.model.validity,this.model.queueDomain&&(i.host=this.model.queueDomain),this.model.removeTokenFromUrl&&(i.removeTokenFromUrl=!0,i.queryStringPrefix=this.model.queryStringPrefix),r=this,this.model.onVerified&&(i.onVerified=function(){(function(){eval(r.model.onVerified)})(n,r.model.eventId)}),this.model.onDisabled&&(i.onDisabled=function(){(function(){eval(r.model.onDisabled)})(n,r.model.eventId)}),this.model.onTimeout&&(i.onTimeout=function(){(function(){eval(r.model.onTimeout)})(n,r.model.eventId)}),this.model.redirectLogic==t.Model.RedirectionLogic.EventTargetUrl||this.model.redirectLogic==1?(i.useEventTargetUrl=!0,i.targetUrl=null):this.model.redirectLogic==t.Model.RedirectionLogic.ForcedTargetUrl||this.model.redirectLogic==t.Model.RedirectionLogic.ForecedTargetUrl||this.model.redirectLogic==2?(i.useEventTargetUrl=!1,i.targetUrl=this.model.forcedTargetUrl):(this.model.redirectLogic==t.Model.RedirectionLogic.AllowTParameter||this.model.redirectLogic==0)&&(i.useEventTargetUrl=!1,i.targetUrl=null),i},i}(u);t.IntegrationPointQueue=e;o=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.getEventId=function(){return this.model.eventId},t.prototype.getCookieDomain=function(){return this.model.cookieDomain},t.prototype.getQueueDomain=function(){return this.model.queueDomain},t}(u);t.IntegrationPointCancel=o;s=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t}(u);t.IntegrationPointIgnore=s;h=function(){function n(n,t){this._triggerModel=n;this._triggerPartFactory=t;this.logicalOperator=n.logicalOperator||"And";this.initOperators()}return n.CreateTrigger=function(t,r){return r===void 0&&(r=i.CreateValidator),new n(t,r)},n.prototype.initOperators=function(){var n,t,i;for(this._expersions=[],n=0,t=this._triggerModel.triggerParts;n<t.length;n++)i=t[n],this._expersions.push(this._triggerPartFactory(i))},n.prototype.evaluate=function(){var n,r,i,u,t;if(this.logicalOperator.toLowerCase()=="and"){for(n=0,r=this._expersions;n<r.length;n++)if(t=r[n],!t.evaluate())return!1;return!0}if(this.logicalOperator.toLowerCase()=="or"){for(i=0,u=this._expersions;i<u.length;i++)if(t=u[i],t.evaluate())return!0;return!1}throw"Not supported logical operator";},n}();t.Trigger=h;i=function(){function n(n){this.triggerPartModel=n}return n.CreateValidator=function(n){n.validatorType=n.validatorType||"UrlValidator";switch(n.validatorType){case t.Model.ValidatorType.UrlValidator:return new c(n);case t.Model.ValidatorType.CookieValidator:return new l(n);case t.Model.ValidatorType.JSVariableValidator:return new a(n);case t.Model.ValidatorType.UserAgentValidator:return new v(n);default:return new y(n)}},n.getDocumentCookie=function(){return document.cookie},n.getWindowLocation=function(){return window.location},n.getJSVariableValue=function(n){return window[n]},n.getUserAgent=function(){return window.navigator.userAgent},n}();t.ValidatorBase=i;c=function(n){function u(t){return n.call(this,t)||this}return __extends(u,n),u.prototype.evaluate=function(){return r.evaluate(this.triggerPartModel.operator,this.getUrlPart(),this.triggerPartModel.valueToCompare,this.triggerPartModel.isNegative,this.triggerPartModel.isIgnoreCase,this.triggerPartModel.valuesToCompare)},u.prototype.getUrlPart=function(){var n=i.getWindowLocation();switch(this.triggerPartModel.urlPart){case t.Model.UrlPartSelectorType.HostName:return n.hostname;case t.Model.UrlPartSelectorType.PagePath:return n.pathname;case t.Model.UrlPartSelectorType.PageUrl:return n.href;default:throw"Not supported url part selector"+this.triggerPartModel.urlPart;}},u}(i);t.UrlValidator=c;l=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.evaluate=function(){var n=this.getCookie(this.triggerPartModel.cookieName);return r.evaluate(this.triggerPartModel.operator,n,this.triggerPartModel.valueToCompare,this.triggerPartModel.isNegative,this.triggerPartModel.isIgnoreCase,this.triggerPartModel.valuesToCompare)},t.prototype.getCookie=function(n){for(var t,e=i.getDocumentCookie(),u=n+"=",f=e.split(";"),r=0;r<f.length;r++){for(t=f[r];t.charAt(0)==" ";)t=t.substring(1);if(t.indexOf(u)==0)return t.substring(u.length,t.length)}return""},t}(i);t.CookieValidator=l;a=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.evaluate=function(){return r.evaluate(this.triggerPartModel.operator,i.getJSVariableValue(this.triggerPartModel.variableName),this.triggerPartModel.valueToCompare,this.triggerPartModel.isNegative,this.triggerPartModel.isIgnoreCase,this.triggerPartModel.valuesToCompare)},t}(i);t.JSVariableValidator=a;v=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.evaluate=function(){return r.evaluate(this.triggerPartModel.operator,i.getUserAgent(),this.triggerPartModel.valueToCompare,this.triggerPartModel.isNegative,this.triggerPartModel.isIgnoreCase,this.triggerPartModel.valuesToCompare)},t}(i);t.UserAgentValidator=v;y=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.evaluate=function(){return!1},t}(i);t.FalsyValidator=y;r=function(){function n(){}return n.containsAny=function(t,i,r,u){for(var o,f=0,e=u||[];f<e.length;f++)if(o=e[f],n.contains(!1,i,r,o))return!t;return t},n.equalsAny=function(t,i,r,u){for(var o,f=0,e=u||[];f<e.length;f++)if(o=e[f],n.equals(!1,i,r,o))return!t;return t},n.contains=function(n,t,i,r){if(r=="*")return!0;var u=!1;return u=t?i.toUpperCase().indexOf(r.toUpperCase())>-1:i.indexOf(r)>-1,n?!u:u},n.equals=function(n,t,i,r){var u=!1;return u=t?i.toUpperCase()===r.toUpperCase():i===r,n?!u:u},n.evaluate=function(i,r,u,f,e,o){var s=String(r);if(f==undefined)return this.evaluate_1_0_0_1(i,s,String(u));switch(i){case t.Model.ComparisonOperatorType.Equals:return n.equals(f,e,s,String(u));case t.Model.ComparisonOperatorType.Contains:return n.contains(f,e,s,String(u));case t.Model.ComparisonOperatorType.ContainsAny:return n.containsAny(f,e,s,o);case t.Model.ComparisonOperatorType.EqualsAny:return n.equalsAny(f,e,s,o);default:throw"Not supported  operator : "+i;}},n.evaluate_1_0_0_1=function(i,r,u){switch(i){case t.Model.ComparisonOperatorType.Equals:return n.equals(!1,!1,r,u);case t.Model.ComparisonOperatorType.NotEquals:return this.equals(!0,!1,r,u);case t.Model.ComparisonOperatorType.Contains:return n.contains(!1,!1,r,u);case t.Model.ComparisonOperatorType.NotContains:return n.contains(!0,!1,r,u);case t.Model.ComparisonOperatorType.IgEquals:return n.equals(!1,!0,r,u);case t.Model.ComparisonOperatorType.IgContains:return n.contains(!1,!0,r,u);default:throw"Not supported  operator : "+i;}},n}();t.ComparisonOperator=r;t.applyIntegrationConfig=f;t.loadIntegrationConfig=w;t.loadIntegrationConfigFromServer=p;n.Javascript.PageEventIntegration={initQueueClient:f};t.initQueueClient=k;n.validateUser=d;n.getIntegrationConfig=nt;n.isIntegrationConfigReady=g})(i=t.IntegrationConfig||(t.IntegrationConfig={}))})(t=n.Javascript||(n.Javascript={}))}(QueueIt||(QueueIt={}));en=QueueIt.Tools.EnvironmentHelper.retrieveEnvInfoFromScriptTag();en&&en.cid&&en.intercept&&QueueIt.Javascript.KnownUser.AjaxInterceptor.interceptOpen(en.domainToIntercept);QueueIt.Javascript.IntegrationConfig.loadIntegrationConfig();